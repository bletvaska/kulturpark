services:
  core:
    image: bletvaska/gaussgame-core
#    build: ..
    depends_on:
      - mosquitto
    restart: always
    environment:
      TAPGAME_BROKER: mosquitto
      TAPGAME_DB_URI: sqlite:///app/db.sqlite

  ui:
    image: bletvaska/gaussgame-ui
    depends_on:
      - mosquitto
      - core
    restart: always
    ports:
      - 80:80
    environment:
      VITE_BROKER_URL: mosquitto
      VITE_BROKER_PORT: 1883
#      VITE_BROKER_USERNAME:
#      VITE_BROKER_PASSWORD:


  mosquitto:
    # url: https://hub.docker.com/_/eclipse-mosquitto
    image: eclipse-mosquitto:2.0-openssl
    restart: always
    volumes:
      - ./mosquitto:/mosquitto/config:ro


  # db:
  #   # url: https://hub.docker.com/r/bitnami/postgresql
  #   image: postgress:latest
  #   volumes:
  #   - postgresql:/bitnami/postgresql
  #   # ports:
  #   # - 5432:5432
  #   environment:
  #   - POSTGRESQL_PASSWORD=secret
  #   - POSTGRESQL_USERNAME=boris
  #   - POSTGRESQL_DATABASE=game

#  mqtt-explorer:
#    image: smeagolworms4/mqtt-explorer
#    ports:
#    - 4000:4000 



#volumes:
#  postgresql:
